<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator - Generate specified-length passwords</title>
    <link rel="stylesheet" href="genpasswd.css">
    <link rel="icon" type="image/png" href="img/genpasswdicon.svg" sizes="256x256">
</head>
<body style="background-image: url(img/background.jpg);">
    <div class="container">
        <img id="abcdef" src="img/menu.svg" title="Menu" class="menubuttons" width="50" height="50" style="position: fixed;">
        <a href="index.html"><img src="img/home.svg" title="Home" class="menubuttons" width="50" height="50" style="position: fixed; left: 50px;"></a>
        <nav id="manu"  style="background-color: black;">
            <ul>
                <li style="color: white; margin-bottom: 35px; font-family: 'Ubuntu Sans Mono'; font-size: 60px;">MENU</li>
                <li><a href="index.html" style="color: yellow; font-family: sans-serif;"><img width="30" height="30" src="img/genpasswdicon.svg" title="home"> Home</a></li>
                <li><a href="password_generator.html" style="color: yellow; text-decoration: none; font-family: sans-serif;"><img id="ico" width="30" height="30" src="img/key-solid.svg" title="generate password with a specific length">Specific generate</a></li>
                <li><button id="ghiklm">Close menu</button></li>
            </ul>
        </nav>
        <main>
            <section id="intro"> 
                <pre id="ascii" style="font-weight: 900; margin-left: 25%; background-color: black; width: 435px;">
 ________________________________________________________
/\                                                       \
\_|                                                   _  |
  |   __ _  ___ _ __  _ __   __ _ ___ _____      ____| | |
  |  / _` |/ _ \ `_ \| `_ \ / _` / __/ __\ \ /\ / / _` | |
  | | (_| |  __/ | | | |_) | (_| \__ \__ \\ V  V / (_| | |
  |  \__, |\___|_| |_| .__/ \__,_|___/___/ \_/\_/ \__,_| |
  |  |___/           |_|                                 |
  |   ___________________________________________________|_
   \_/_____________________________________________________/
                </pre>
                <h1 id="version"><b>üî• genpasswd website 1.0.8 - Generate strong passwords on the website üî•</b></h1>

            </section>

            <section id="inputplace">
                <label class="genpasswd" style="font-family: 'Ubuntu Sans Mono'; color: rgb(255, 255, 0);">Please take down the length of password you want to generate:</label><br>
                <textarea rows="1" cols="16" type="text" id="abc" placeholder="Password length" title="Write!" class="genpasswd"></textarea>
                <br><br>
                <button id="generator" class="genpasswd">Generate</button>
            </section>
            <br><br>
            <section id="results">
                <p id="lim"></p>
                <p id="strongpasswd"></p>
                <p id="passphrase"></p>
            </section>
        </main>
    </div>
    <footer style="background-color: grey;" id="fter1">
            <p>Copyright &copy; by who5673. All rights served with GPLv3, which is in this file: <a id="license" href="LICENSE" style="text-decoration: none;">LICENSE</a></p>
            <p>Now we cannot set our home address</p>
            <p>Contact us at windows7modrenedition@gmail.com or 0abcdefghi</p>
            <br><br><br>
    </footer>
    <script src="genpasswd.js"></script>
    <script>
        let limit = 0;
        function generate_strong_password(length = 24) {
            const lowercase = 'abcdefghijklmnpqrstuvwxyz'; 
            const uppercase = 'ABCDEFGHIJKMNOPQRSTUVWXYZ'; 
            const digits    = '0234567891';               
            const symbols   = '!@#$%^&*()-_=+[]{}';

            const all = lowercase + uppercase + digits + symbols;
            let password = '';

            for (let i = 0; i < length; i++) {
                const rand = Math.floor(Math.random() * all.length);
                password += all[rand];
            }

            return password;
        }
        let warning = () => {
            if (limit === 1) { document.getElementById("lim").textContent = `‚ùï WARNING: You have ${3 - limit} more attempts to generate 
            your password before we force you to go to home after spamming too much time.`; }
            else if (limit === 2) { document.getElementById("lim").textContent = `‚ÄºÔ∏è WARNING: You have ${3 - limit} more attempts to generate 
            your password before we force you to go to home after spamming too much time.`; }
        }
        let genpass = () => {
            switch (limit) {
                case 2:
                    document.getElementById("lim").textContent = "‚ùå You need to go to homepage now.";
                    window.location.href = "index.html";
                    break;
                default:
                    if (limit >= 2) { document.getElementById("lim").textContent = "‚ùå You need to go to homepage now."; window.location.href = "index.html"; break; }
                    else {
                        limit += 1;
                        break;
                    }
            }
            length = document.getElementById("abc").value;
            length = Number(length);
            console.log(`User inputs ${typeof length} length = ${length}`);
            if (Number.isNaN(length)) {
                throw new Error("Error! The value must be a nature number!");
            } else if (length < 13 || length > 100) {
                throw new Error("Error! The length must be between 13 and 100 characters to be strong enough and make you remember it")
            } else {
                console.log("limit =", limit);
                warning();
                let passwd = generate_strong_password(length);
                document.getElementById("strongpasswd").textContent = "Strong password:";
                document.getElementById("passphrase").textContent = `   üëâ ${passwd}`
            }
        }
        try {
            let length;
            document.getElementById("generator").onclick = function(){
                genpass();
            }
            let EnterInteract = document.getElementById("abc");
            EnterInteract.addEventListener("keydown", () => {
                if (event.key === "Enter") {
                    event.preventDefault();
                    genpass();
                }
            })
        }
        catch (Error) {
            console.log("ERROR?")
        }
    </script>
</body>
</html>
